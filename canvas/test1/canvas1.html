<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        html, body{
            color: black;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body style="width: 100%;">
    <canvas id="canvas" 
    width="100" height="150">
    </canvas>
    
</body>
<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

   
    ctx.fillStyle="#E992B9";
    ctx.lineWidth=1; 
    var str = "假如生活欺骗了你，请不要悲伤！thank you!"
    var lineWidth = 0;
    var canvasWidth = canvas.width;//计算canvas的宽度
    var initHeight=15;//绘制字体距离canvas顶部初始的高度
    var lastSubStrIndex= 0; //每次开始截取的字符串的索引
    for(let i=0;i<str.length;i++){ 
        lineWidth+=ctx.measureText(str[i]).width; 
        if(lineWidth>canvasWidth){  
            ctx.fillText(str.substring(lastSubStrIndex,i),0,initHeight);//绘制截取部分
            initHeight+=20;//20为字体的高度
            lineWidth=0;
            lastSubStrIndex=i;
        } 
        if(i==str.length-1){//绘制剩余部分
            ctx.fillText(str.substring(lastSubStrIndex,i+1),0,initHeight);
        }
    }
    
    // ctx.fillStyle = "red";
    // ctx.font = "20px '微软雅黑'";

    // ctx.fillText("You jump! I jump!",50,100, 20);
    // ctx.fillText("rose~jack", 0, 20);
    var img = new Image()
    img.onload = function() {
        ctx.drawImage(img, 0, 50, 100, 50);
        var image = new Image()
        image.src = canvas.toDataURL('image/png')
        document.body.appendChild(image)
    }
    img.src = './img/cloud_1.png';
    
</script>
</html>